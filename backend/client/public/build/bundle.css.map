{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Player.svelte",
    "../../Table.svelte"
  ],
  "sourcesContent": [
    "<style>\n\t#ThreeJS {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n\t}\n  #foreground {\n    z-index: 1000;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n  }\n</style>\n\n<script>\n  import io from 'socket.io-client';\n  import Table from './Table.svelte';\n  import Player from './Player.svelte';\n  import DiceInput from './DiceInput.svelte';\n\n\timport { onMount } from 'svelte';\n\n  const apiURL = \"http://127.0.0.1:8080\" || \"https://guarded-stream-90676.herokuapp.com\";\n  const username = prompt(\"Please enter your user name\", \"\");\n\n  const socket = io(apiURL + \"/?username=\" + username);\n  let userDict = {};\n  let userList = [];\n  let rolls = [];\n  let mylatestroll = 0;\n\n  function roll() {\n  \tsocket.emit(\"roll\");\n  }\n\n  // listen for roll event\n  socket.on(\"roll\", (userId, result) => {\n\t  console.log(\"received roll\", userId, result);\n\t  if (userDict[userId]==username){\n\t\t  mylatestroll = result;\n\t  }\n    rolls = [{\n      user: userDict[userId],\n      result: result\n    }, ...rolls];\n    console.log(rolls);\n    randomDiceThrow(result);\n  });\n\n  // listen for user list event\n  socket.on(\"users-list\", (data) => {\n    console.log(\"received users-list\", data);\n    userDict = data;\n    userList = Object.values(data);\n  });\n\n\n  import * as THREE from \"three\";\n  import OrbitControls from 'orbit-controls-es6';\n\n  import CANNON from \"cannon\";\n  import { DiceManager, DiceD6, DiceD20 } from \"threejs-dice/lib/dice\";\n  import Stats from \"stats.js\";\n\n  // standard global variables\n  var container,\n    scene,\n    camera,\n    renderer,\n    controls,\n    stats,\n    world,\n    dice = [];\n\n  // FUNCTIONS\n  onMount(() => {\n    // SCENE\n    scene = new THREE.Scene();\n    // CAMERA\n    var SCREEN_WIDTH = window.innerWidth,\n      SCREEN_HEIGHT = window.innerHeight;\n    var VIEW_ANGLE = 45,\n      ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT,\n      NEAR = 0.01,\n      FAR = 20000;\n    camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);\n    scene.add(camera);\n    camera.position.set(0, 30, 30);\n    // RENDERER\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    container = document.getElementById(\"ThreeJS\");\n    container.appendChild(renderer.domElement);\n    // EVENTS\n    // CONTROLS\n    controls = new OrbitControls(camera, renderer.domElement);\n    // STATS\n    // stats = new Stats();\n    // stats.domElement.style.position = \"absolute\";\n    // stats.domElement.style.bottom = \"0px\";\n    // stats.domElement.style.zIndex = 100;\n    // container.appendChild(stats.domElement);\n\n    let ambient = new THREE.AmbientLight(\"#ffffff\", 0.3);\n    scene.add(ambient);\n\n    let directionalLight = new THREE.DirectionalLight(\"#ffffff\", 0.5);\n    directionalLight.position.x = -1000;\n    directionalLight.position.y = 1000;\n    directionalLight.position.z = 1000;\n    scene.add(directionalLight);\n\n    let light = new THREE.SpotLight(0xefdfd5, 1.3);\n    light.position.y = 100;\n    light.target.position.set(0, 0, 0);\n    light.castShadow = true;\n    light.shadow.camera.near = 50;\n    light.shadow.camera.far = 110;\n    light.shadow.mapSize.width = 1024;\n    light.shadow.mapSize.height = 1024;\n    scene.add(light);\n\n    // FLOOR\n    var floorMaterial = new THREE.MeshPhongMaterial({\n      color: \"#00aa00\",\n      side: THREE.DoubleSide\n    });\n    var floorGeometry = new THREE.PlaneGeometry(30, 30, 10, 10);\n    var floor = new THREE.Mesh(floorGeometry, floorMaterial);\n    floor.receiveShadow = true;\n    floor.rotation.x = Math.PI / 2;\n    scene.add(floor);\n    // SKYBOX/FOG\n    var skyBoxGeometry = new THREE.CubeGeometry(10000, 10000, 10000);\n    var skyBoxMaterial = new THREE.MeshPhongMaterial({\n      color: 0x9999ff,\n      side: THREE.BackSide\n    });\n    var skyBox = new THREE.Mesh(skyBoxGeometry, skyBoxMaterial);\n    scene.add(skyBox);\n    scene.fog = new THREE.FogExp2(0x9999ff, 0.00025);\n\n    ////////////\n    // CUSTOM //\n    ////////////\n    world = new CANNON.World();\n\n    world.gravity.set(0, -9.82 * 20, 0);\n    world.broadphase = new CANNON.NaiveBroadphase();\n    world.solver.iterations = 16;\n\n    DiceManager.setWorld(world);\n\n    //Floor\n    let floorBody = new CANNON.Body({\n      mass: 0,\n      shape: new CANNON.Plane(),\n      material: DiceManager.floorBodyMaterial\n    });\n    floorBody.quaternion.setFromAxisAngle(\n      new CANNON.Vec3(1, 0, 0),\n      -Math.PI / 2\n    );\n    world.add(floorBody);\n\n    //Walls\n\n    // var colors = [\"#ff0000\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#ff00ff\"];\n    // for (var i = 0; i < 5; i++) {\n    // \tvar die = new DiceD6({ size: 1.5, backColor: colors[i] });\n    // \tscene.add(die.getObject());\n    // \tdice.push(die);\n    // }\n\n    var die = new DiceD20({ size: 3.5, backColor: \"#ff0000\" });\n    scene.add(die.getObject());\n    dice.push(die);\n\n    document\n      .querySelector(\"#ThreeJS\")\n      .addEventListener(\"click\", randomDiceThrow);\n    // setInterval(randomDiceThrow, 3000);\n    // randomDiceThrow();\n    requestAnimationFrame(animate);\n  });\n\n  function randomDiceThrow(result) {\n    var diceValues = [];\n\n    for (var i = 0; i < dice.length; i++) {\n      let yRand = Math.random() * 20;\n      dice[i].getObject().position.x = -15 - (i % 3) * 1.5;\n      dice[i].getObject().position.y = 2 + Math.floor(i / 3) * 1.5;\n      dice[i].getObject().position.z = -15 + (i % 3) * 1.5;\n      dice[i].getObject().quaternion.x =\n        ((Math.random() * 90 - 45) * Math.PI) / 180;\n      dice[i].getObject().quaternion.z =\n        ((Math.random() * 90 - 45) * Math.PI) / 180;\n      dice[i].updateBodyFromMesh();\n      let rand = Math.random() * 5;\n      dice[i]\n        .getObject()\n        .body.velocity.set(25 + rand, 40 + yRand, 15 + rand);\n      dice[i]\n        .getObject()\n        .body.angularVelocity.set(\n          20 * Math.random() - 10,\n          20 * Math.random() - 10,\n          20 * Math.random() - 10\n        );\n\n      //diceValues.push({ dice: dice[i], value: i + 1 });\n      diceValues.push({ dice: dice[i], value: result});\n    }\n\n    DiceManager.prepareValues(diceValues);\n  }\n\n  function animate() {\n    updatePhysics();\n    render();\n    update();\n    requestAnimationFrame(animate);\n  }\n\n  function updatePhysics() {\n    world.step(1.0 / 60.0);\n\n    for (var i in dice) {\n      dice[i].updateMeshFromBody();\n    }\n  }\n\n  function update() {\n    controls.update();\n    // stats.update();\n  }\n\n  function render() {\n    renderer.render(scene, camera);\n  }\n\n</script>\n\n<div id=\"ThreeJS\" style=\"position: absolute; left:0px; top:0px\"></div>\n\n<div id=\"foreground\">\n  <h1>Hello {username}!</h1>\n\n\n  <h2>Rollers</h2>\n  <ul>\n    {#each userList as user, i}\n      <li>\n        {user}\n      </li>\n    {/each}\n  </ul>\n\n  <button on:click={roll}>Roll dice</button>\n\n  <h2>Rolls</h2>\n  <ul>\n    {#each rolls as {user, result}, i}\n      <li>\n        {user}: {result}\n      </li>\n    {/each}\n  </ul>\n\n  <Player playername={username} latestroll={mylatestroll}/>\n  <Table/>\n  <DiceInput/>\n\n</div>\n",
    "<script>\n\n    export let playername = 'Anonymous player';\n    export let latestroll = 0;\n\n</script>\n\n<style>\n\n.playername {\n\n    background-color: rgb(172, 100, 190);\n    border: 1em;\n    padding: 0.2em;\n}\n\n</style>\n\n<h2 class=\"playername\">Welcome {playername}!</h2>\n<p class=\"latestroll\">Your latest roll was: {latestroll}</p>",
    "<script>\n\n    let tabletextures = [\n\t\t{ id: 0, name: \"Tavern #1\", path: 'table/img/table00.jpg'},\n\t\t{ id: 1, name: \"Tavern #2\", path: 'table/img/table01.jpg'},\n\t\t{ id: 2, name: \"Tavern #3\", path: 'table/img/table02.jpg'},\n    ];\n    \n    let textureindex = 2; \n    let text = \"Game table selected by default\";\n    export let selectedImage = tabletextures[textureindex]['path'];\n\n    function setImage(i) {\n        selectedImage = tabletextures[i]['path'];\n        text = \"You chose \"+tabletextures[i]['name'];\n    }\n\n</script>\n\n<style>\nimg {\n    padding: 0.5em;\n}\n\n.selectedtexture {\n  padding: 0.5em;\n  border-radius: 5%;  \n}\n\n.texturesample {\n  padding: 0.5em;\n  border-radius: 10%;\n  width: 100px;\n}\n\n</style>\n\n<h1>Choose your game table texture</h1>\n\n{#each tabletextures as { id, path }, i}\n<img on:click|preventDefault={() => setImage(i)} class=\"texturesample\"  src=\"{path}\" alt=\"{id}\"/>\n{/each}\n<br/>\n<img src=\"{selectedImage}\" class=\"selectedtexture\" alt=\"Table texture #1\"/>\n<p>{text}</p>\n\n"
  ],
  "names": [],
  "mappings": "AACC,QAAQ,cAAC,CAAC,AACP,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,GAAG,CACT,GAAG,CAAE,GAAG,AACX,CAAC,AACA,WAAW,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,GAAG,CACT,GAAG,CAAE,GAAG,AACV,CAAC;ACFH,WAAW,cAAC,CAAC,AAET,gBAAgB,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACpC,MAAM,CAAE,GAAG,CACX,OAAO,CAAE,KAAK,AAClB,CAAC;ACMD,GAAG,cAAC,CAAC,AACD,OAAO,CAAE,KAAK,AAClB,CAAC,AAED,gBAAgB,cAAC,CAAC,AAChB,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,EAAE,AACnB,CAAC,AAED,cAAc,cAAC,CAAC,AACd,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,AACd,CAAC"
}